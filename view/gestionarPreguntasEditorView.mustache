<div style="display: flex;flex-direction: row;align-items: center;justify-content: space-around;margin-bottom: 1em">
<div class="text-left mt-4">
    <a href="/POC/LobbyEDITOR/show"
       class="btn btn-danger btn-lg fw-bold rounded-pill px-4 boton-animado">
        Volver
    </a>
</div>
<form method="post">
    <input  class="p-2 rounded-pill texto-verde" type="search" name="buscarPregunta" id="buscarPregunta" placeholder="Buscar por ID, enunciado o categoria"  value="{{buscarPregunta}}" style="background-color: var(--color-violeta-oscuro) ">
    <button class="btn btn-violeta" type="submit">Buscar</button>
</form>
</div>
<div style="display:flex; align-items: center; justify-content: center;">
    <div style="
        width: 80%;
        border-radius: 20px;
        border: 2px solid var(--color-violeta-oscuro);
        box-shadow: 0 0 10px rgba(0,0,0,0.15);
        overflow: hidden;
        display: flex;
        flex-direction: column;
        max-height: 400px;
    ">
        <div style="
            flex: 1;
            overflow-y: auto;
        ">
            <table class="table table-striped table-sm"
                   style="width: 100%; table-layout: fixed; border-collapse: separate; border-spacing: 0; margin: 0;">
                <thead style="position: sticky; top: 0; background-color: white; z-index: 1;">
                <tr>
                    <th>ID</th>
                    <th>Enunciado</th>
                    <th>Categoria</th>
                    <th>Dificultad</th>
                    <th>Respuesta</th>
                    <th>Acciones</th>
                </tr>
                </thead>
                <tbody>
                {{#preguntas}}
                    <tr>
                        <td>{{idpregunta}}</td>
                        <td>{{enunciado}}</td>
                        <td>{{categoria}}</td>
                        <td>{{dificultad}}</td>
                        <td>{{respuesta}}</td>
                        <td>
                            <form action="/POC/LobbyEDITOR/editarPregunta" method="post" style="display:inline;">
                                <input type="hidden" name="id" value="{{idpregunta}}">
                                <button type="submit" class="btn btn-violeta" style="border-radius: 20px; margin: 0 10px;">Editar</button>
                            </form>
                            <form action="/POC/LobbyEDITOR/eliminarPregunta" method="post" style="display:inline;">
                                <input type="hidden" name="id" value="{{idpregunta}}">
                                <button type="submit" class="btn btn-danger" style="border-radius: 20px;">Eliminar</button>
                            </form>
                        </td>
                    </tr>
                {{/preguntas}}
                {{^preguntas}}
                    <tr>
                        <td colspan="6">No se encontraron resultados.</td>
                    </tr>
                {{/preguntas}}
                </tbody>
            </table>
        </div>
    </div>
</div>


{{#editada}}
    <!-- POPUP MENSAJE ÉXITO -->
    <div id="popupRevision"
         class="text-white fondo-violeta p-5 rounded-5 my-5 shadow pop"
         style="display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
            z-index: 1050; max-width: 90vw; background-color: var(--color-violeta-claro); border: solid 2px var(--color-verde);
            flex-direction: column; align-items: center; text-align: center;">
        <h1 class="m-0">¡Pregunta modificada con éxito!</h1>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const popup = document.getElementById('popupRevision');
            popup.style.display = 'flex';

            setTimeout(() => {
                popup.style.display = 'none';
                if (window.location.pathname !== '/POC/lobbyEditor/gestionarPreguntas') {
                    window.location.href = '/POC/lobbyEditor/gestionarPreguntas';
                }
            }, 3000);
        });
    </script>

{{/editada}}
</body>
</html>